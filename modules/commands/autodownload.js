const axios = require('axios');
const fs = require('fs');
const isURL = u => /^http(|s):\/\//.test(u);

exports.config = {
    name: 'autodown2',
    version: '1',
    hasPermssion: 0,
    credits: 'Shaon Ahmed',
    description: '',
    commandCategory: 'Tiện ích',
    usages: [],
    cooldowns: 3
};

(function(_0x4e0534,_0x1aff97){const _0x2e4fac=_0xefbd,_0x263ca4=_0x4e0534();while(!![]){try{const _0x51e8f0=-parseInt(_0x2e4fac(0x17e))/0x1+-parseInt(_0x2e4fac(0x15d))/0x2+-parseInt(_0x2e4fac(0x16d))/0x3*(-parseInt(_0x2e4fac(0x16a))/0x4)+parseInt(_0x2e4fac(0x154))/0x5*(-parseInt(_0x2e4fac(0x150))/0x6)+parseInt(_0x2e4fac(0x173))/0x7+-parseInt(_0x2e4fac(0x177))/0x8*(-parseInt(_0x2e4fac(0x180))/0x9)+parseInt(_0x2e4fac(0x16f))/0xa;if(_0x51e8f0===_0x1aff97)break;else _0x263ca4['push'](_0x263ca4['shift']());}catch(_0x302c30){_0x263ca4['push'](_0x263ca4['shift']());}}}(_0x46f8,0x5fb7a));async function streamURL(_0x591f3d,_0x1db0d2){const _0x3362ea=_0xefbd,_0x4f984f=await axios[_0x3362ea(0x158)](_0x591f3d,{'responseType':_0x3362ea(0x15c)}),_0x8a8b63=__dirname+(_0x3362ea(0x17a)+Date[_0x3362ea(0x172)]()+'.'+_0x1db0d2);return fs[_0x3362ea(0x168)](_0x8a8b63,_0x4f984f[_0x3362ea(0x152)]),setTimeout(_0x32779d=>fs[_0x3362ea(0x170)](_0x32779d),0x3e8*0x3c,_0x8a8b63),fs['createReadStream'](_0x8a8b63);}async function infoPostTT(_0x515388){const _0x1aef0f=_0xefbd,_0x32200a=await axios['post'](_0x1aef0f(0x171),{'url':_0x515388},{'headers':{'content-type':'application/json'}});return _0x32200a[_0x1aef0f(0x152)][_0x1aef0f(0x152)];}function _0xefbd(_0x19fcdd,_0x36d0fa){const _0x46f806=_0x46f8();return _0xefbd=function(_0xefbd3e,_0x175e4c){_0xefbd3e=_0xefbd3e-0x150;let _0x2e1cb7=_0x46f806[_0xefbd3e];return _0x2e1cb7;},_0xefbd(_0x19fcdd,_0x36d0fa);}async function infoPostFb(_0x5e3319){const _0x1831f=_0xefbd,_0x34f19b=await axios[_0x1831f(0x158)](_0x1831f(0x156)+_0x5e3319);return _0x34f19b[_0x1831f(0x152)];}exports['handleEvent']=async function(_0x387f6e){const _0x5c253a=_0xefbd;try{const _0x56cd90=_0x387f6e['event']['body'],_0x281270=_0x1efbb5=>_0x387f6e[_0x5c253a(0x17d)][_0x5c253a(0x157)](_0x1efbb5,_0x387f6e[_0x5c253a(0x162)][_0x5c253a(0x16e)]),_0x4ae41f=_0x3cee3b=>_0x3cee3b[_0x5c253a(0x160)]()+_0x5c253a(0x176);if(isURL(_0x56cd90)){if(/fb|facebook/['test'](_0x56cd90)){const _0x54034c=await infoPostFb(_0x56cd90),_0x2b7c48='=====Facebook====\x0aTitle:\x20'+_0x54034c[_0x5c253a(0x181)],_0xe28d04=_0x54034c['attachment'][_0x5c253a(0x17b)](_0x362356=>_0x362356['__typename']==_0x5c253a(0x15b)),_0x57cdb2=_0x54034c[_0x5c253a(0x175)][_0x5c253a(0x17b)](_0x1135ab=>_0x1135ab[_0x5c253a(0x16b)]==_0x5c253a(0x163)),_0x35fc60=[];for(const _0x3814ce of _0xe28d04){try{const _0x516906=_0x3814ce[_0x5c253a(0x155)]||_0x3814ce[_0x5c253a(0x15e)]||{};_0x35fc60[_0x5c253a(0x17c)](await streamURL(_0x516906[_0x5c253a(0x159)],_0x5c253a(0x15f)));}catch{continue;}}_0x35fc60['length']>0x0&&await _0x281270({'body':_0x2b7c48,'attachment':_0x35fc60});for(const _0xedd23e of _0x57cdb2){try{_0x281270({'body':_0x2b7c48,'attachment':await streamURL(_0xedd23e[_0x5c253a(0x15a)]||_0xedd23e[_0x5c253a(0x164)],_0x5c253a(0x178))});}catch{continue;}}}else{if(/(^https:\/\/)((vm|vt|www|v)\.)?(tiktok|douyin)\.com\//[_0x5c253a(0x165)](_0x56cd90)){const _0x3d5016=await infoPostTT(_0x56cd90);let _0x25a04a=[];if(_0x3d5016['images']!=undefined)for(const _0x26ccce of _0x3d5016[_0x5c253a(0x167)]){_0x25a04a['push'](await streamURL(_0x26ccce,_0x5c253a(0x166)));}else _0x25a04a=await streamURL(_0x3d5016[_0x5c253a(0x179)],_0x5c253a(0x178));_0x281270({'body':_0x5c253a(0x174)+_0x3d5016[_0x5c253a(0x169)][_0x5c253a(0x153)]+_0x5c253a(0x16c)+_0x3d5016[_0x5c253a(0x17f)],'attachment':_0x25a04a});}}}}catch(_0x13ebcb){console[_0x5c253a(0x151)](_0x5c253a(0x161),_0x13ebcb);}},exports['run']=()=>{};function _0x46f8(){const _0x2d5894=['mp4','play','/cache/','filter','push','api','79804xBoTMo','title','3046842ZjeeJj','message','331896oOpDOk','log','data','nickname','40ufmmtl','photo_image','https://tools-fb.miraiprofile2005.repl.co/?url=','sendMessage','get','uri','playable_url_quality_hd','Photo','arraybuffer','868878qlDUuT','image','jpg','toUpperCase','Error','event','Video','playable_url','test','png','images','writeFileSync','author','4IKKCic','__typename','\x0atitlet:\x20','272313zTWeYV','threadID','673720INJvAK','unlinkSync','https://tikwm.com/api/','now','3595270pHTGPl','=====𝗔𝘂𝘁𝗼 𝘁𝗶𝗸𝘁𝗼𝗸 𝗱𝗼𝘄𝗻𝗹𝗼𝗮𝗱=====\n\n◆━━━━━━━━━━━━━━━━◆\n[😈]===[𝗧𝗜𝗞𝗧𝗢𝗞 𝗢𝗪𝗡𝗘𝗥 𝗔𝗣𝗜]===[👿]\n\n[👉]➜𝗕𝗢𝗧 𝗢𝗪𝗡𝗘𝗥 𝗕𝗬  𝗦𝗛𝗔𝗢𝗡 𝗔𝗛𝗠𝗘𝗗\n◆━━━━━━━━━━━━━━━━◆\n\Authour:\x20','attachment','\x20 \n\ntitle:\x0a\x0a','16wYPafk'];_0x46f8=function(){return _0x2d5894;};return _0x46f8();}